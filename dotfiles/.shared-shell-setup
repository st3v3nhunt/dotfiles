# Go PATH setup
if command -v go &> /dev/null; then
  export GOPATH="$(go env GOPATH)"
  export PATH="$PATH:$GOPATH/bin"
fi

# Lazy-load nvm â€” only initialises when first invoked (~400ms faster than zsh-nvm)
export NVM_DIR="$HOME/.nvm"
_lazy_load_nvm() {
  unset -f _lazy_load_nvm nvm node npm npx nvim which 2>/dev/null
  [ -s "$NVM_DIR/nvm.sh" ] && source "$NVM_DIR/nvm.sh"
}
for _cmd in nvm node npm npx nvim which; do
  eval "${_cmd}() { _lazy_load_nvm; ${_cmd} \"\$@\" }"
done
unset _cmd

# Add Deno to PATH
if [[ "$OSTYPE" != darwin* ]]; then
  export DENO_INSTALL="$HOME/.deno"
  export PATH="$DENO_INSTALL/bin:$PATH"
fi

export PATH="$HOME/.cargo/bin:$PATH"

# Explicitly set path
export XDG_CONFIG_HOME="$HOME/.config"

export VISUAL=nvim
export EDITOR=$VISUAL

# Ensure HOMEBREW_PREFIX is set (differs by OS and processor)
export HOMEBREW_PREFIX="$(brew --prefix)"

# Install HOMEBREW casks (apps) into user specific application directory,
# avoids need for `sudo`
export HOMEBREW_CASK_OPTS="--appdir=~/Applications"

# Add Poetry to PATH
export PATH="$HOME/.local/bin:$PATH"

# Add shell history for iex
export ERL_AFLAGS="-kernel shell_history enabled"

export GROOVY_HOME=/opt/homebrew/opt/groovy/libexec
